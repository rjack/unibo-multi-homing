	  Progetto di Laboratorio di Programmazione di Rete 2006/07
     "Fornire interattività a comunicazione TCP sfruttando multi-homing"

			   PROTOCOLLO APPLICAZIONE

		    Giacomo Ritucci <ritucci@cs.unibo.it>


  Info necessarie nei segmenti

- conformazione: 		flags
- ordine ricostruzione: 	seqnum


  Ricostruzione segmenti

Solita joining queue di segmenti ordinati:

   jq: | 5 | -> | 7 | -> | 12 |

Un segmento è nella jq <==> non ha il seqnum successivo a quello dell'ultimo
segmento inviato all'host: mancano uno o piu' segmenti!

Quindi... insert in jq -> manda NACK all'altro proxy per chiedere segmento
mancante.

Problema: se mando NACK subito appena inserisco segmento in jq sovraccarico
canale e peggioro le cose, obbligando l'altro proxy a rispedire il segmento (e
magari bastava aspettare un attimo)

Ma se aspetto troppo sforo il tetto dei 500ms!

NACK delay da tarare bene! Ogni loop decremento un timer associato ai segmenti
nella jq, quando scade mando il NACK, se arriva il segmento in tempo rimuovo
il timer.


  Routing segmenti

Condizione migliore (nessun ritardo) -> meglio un segmento per ogni canale,
politica round robin.

Condizione peggiore (congestioni frequenti) -> ridondanza per diminuire
probabilità che segmento incontri un ritardo. Non rischio di intasare tutto?!
